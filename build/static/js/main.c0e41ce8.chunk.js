(this["webpackJsonpstick-app"]=this["webpackJsonpstick-app"]||[]).push([[0],{61:function(e,t,a){e.exports=a(91)},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),l=a.n(c),o=a(21),s=a(3),u=a(7),i=a.n(u),m=a(43),p=a(18),d=a(13),f=a(16),b=a.n(f),E=a(55),h=a.n(E);var g=function(e){function t(){return(t=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b.a.get("/users/logout");case 4:e.sent.data&&(window.location="/login"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return r.a.createElement("header",{className:e.authPage?"auth":null},r.a.createElement("h1",null,r.a.createElement(o.b,{to:e.authPage?"/login":"/user"},"Stick ",r.a.createElement(h.a,null)),r.a.createElement("form",{onSubmit:function(e){return t.apply(this,arguments)}},r.a.createElement("button",{className:e.authPage?"visually-hidden":" btn btn-primary log-out",type:"submit"},"Sign Out"))))};var v=function(){var e=(new Date).getFullYear();return r.a.createElement("footer",null,r.a.createElement("p",null,"Copyright \xa9 ",e))},w=a(56),y=a.n(w);var O=function(e){return r.a.createElement("div",{className:"note"},r.a.createElement("h1",null,e.title),r.a.createElement("p",null,e.content),r.a.createElement("button",{onClick:function(){e.delete(e.id)}},r.a.createElement(y.a,null)))};var j=function(e){return e.noteArray.map((function(t,a){return r.a.createElement(O,{key:a,id:a,title:t.title,content:t.content,delete:e.delete})}))},S=a(14),x=a(108),k=a(57),N=a.n(k),C=a(109);var P=function(e){var t={title:"",content:""},a=Object(n.useState)(1),c=Object(d.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)(!1),u=Object(d.a)(s,2),i=u[0],m=u[1],p=Object(n.useState)(Object(S.a)({},t)),f=Object(d.a)(p,2),b=f[0],E=f[1];function h(e){var t=e.target,a=t.value,n=t.name;E((function(e){return Object(S.a)(Object(S.a)({},e),{},{[n]:a})}))}return r.a.createElement("div",null,r.a.createElement("form",{className:"create-note",onSubmit:function(a){b.title===t.title&&b.content===t.content||e.onSubmit(b),a.preventDefault(),o(0),m(!1),E(Object(S.a)({},t))}},i?r.a.createElement("input",{onChange:h,name:"title",placeholder:"Title",value:b.title,autoComplete:"off"}):null,r.a.createElement("textarea",{onClick:function(){m(!0)},onKeyPress:function(e){"Enter"===e.key&&(o((function(e){return 21===e?e:e+1})),console.log(l))},onChange:h,value:b.content,name:"content",placeholder:"Take a note...",rows:i?l:"1"}),r.a.createElement(C.a,{in:i},r.a.createElement(x.a,{type:"submit"},r.a.createElement(N.a,null)))))};var J=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){b.a.get("/users/notes").then((function(e){null===e.data&&(window.location="/"),c(e.data.email),u(e.data.secrets)}))}),[]);var l=Object(n.useState)([]),o=Object(d.a)(l,2),s=o[0],u=o[1];function f(){return(f=Object(p.a)(i.a.mark((function e(t){var n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u((function(e){return[].concat(Object(m.a)(e),[t])}));try{n={email:a,arr:[].concat(Object(m.a)(s),[t])},r={headers:{"Content-Type":"application/json"}},c=JSON.stringify(n),b.a.post("/users/notes",c,r)}catch(l){console.log(l.response.data)}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(p.a)(i.a.mark((function e(t){var n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u((function(e){return e.filter((function(e,a){return a!==t}))}));try{n={email:a,arr:s.filter((function(e,a){return a!==t}))},r={headers:{"Content-Type":"application/json"}},c=JSON.stringify(n),b.a.post("/users/notes",c,r)}catch(l){console.log(l.response.data)}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(g,null),r.a.createElement(P,{onSubmit:function(e){return f.apply(this,arguments)}}),r.a.createElement(j,{noteArray:s,delete:function(e){return E.apply(this,arguments)}}),r.a.createElement(v,null))};var T=function(){var e=Object(n.useState)({email:"",password:""}),t=Object(d.a)(e,2),a=t[0],c=t[1],l=a.email,s=a.password;function u(e){c(Object(S.a)(Object(S.a)({},a),{},{[e.target.name]:e.target.value}))}function m(){return(m=Object(p.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={email:l,password:s},e.prev=2,n={headers:{"Content-Type":"application/json"}},r=JSON.stringify(a),e.next=7,b.a.post("/users/login",r,n);case 7:e.sent.data&&(window.location="/user"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),alert(e.t0.response.data);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}return r.a.createElement("form",{onSubmit:function(e){return m.apply(this,arguments)}},r.a.createElement("h1",{className:"h3 mb-3 fw-normal"},"Sign in"),r.a.createElement("input",{type:"text",name:"email",id:"inputEmail",className:"form-control",value:a.email,onChange:u,placeholder:"Email address",required:!0,autoFocus:!0}),r.a.createElement("input",{type:"password",name:"password",id:"inputPassword",onChange:u,className:"form-control",placeholder:"Password",required:!0,value:s}),r.a.createElement("button",{className:"w-100 btn btn-lg btn-primary sign-in",type:"submit"},"Sign in"),r.a.createElement(o.b,{to:"/register"},r.a.createElement("button",{className:"w-100 btn btn-lg btn-primary register"},"Register")))};var q=function(){var e=Object(n.useState)({email:"",password:"",password2:""}),t=Object(d.a)(e,2),a=t[0],c=t[1],l=a.email,o=a.password,s=a.password2;function u(e){c(Object(S.a)(Object(S.a)({},a),{},{[e.target.name]:e.target.value}))}function m(){return(m=Object(p.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o===s){e.next=5;break}alert("Passwords do not match!"),e.next=18;break;case 5:return a={email:l,password:o},e.prev=6,n={headers:{"Content-Type":"application/json"}},r=JSON.stringify(a),e.next=11,b.a.post("/users/register",r,n);case 11:e.sent.data&&(window.location="/user"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),alert(e.t0.response.data.errors[0].msg);case 18:case"end":return e.stop()}}),e,null,[[6,15]])})))).apply(this,arguments)}return r.a.createElement("form",{onSubmit:function(e){return m.apply(this,arguments)}},r.a.createElement("h1",{className:"h3 mb-3 fw-normal"},"Sign Up"),r.a.createElement("input",{type:"text",name:"email",id:"inputEmail",className:"form-control",value:a.email,onChange:u,placeholder:"Email address",required:!0,autoFocus:!0}),r.a.createElement("input",{type:"password",name:"password",id:"inputPassword",onChange:u,className:"form-control middle-password",placeholder:"Password",required:!0,value:o}),r.a.createElement("input",{type:"password",name:"password2",id:"confirmPassword",onChange:u,className:"form-control confirm-password",placeholder:"Confirm Password",required:!0,value:s}),r.a.createElement("button",{className:"w-100 btn btn-lg btn-primary sign-in",type:"submit"},"Register"))};var D=function(){return r.a.createElement(o.a,null,r.a.createElement(g,{authPage:!0}),r.a.createElement("main",{className:"form-signin"},r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:["/login","/"]},r.a.createElement(T,null)),r.a.createElement(s.a,{exact:!0,path:"/register"},r.a.createElement(q,null)))),r.a.createElement(v,null))};var F=function(){return r.a.createElement(o.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:["/login","/"]},r.a.createElement(D,null)),r.a.createElement(s.a,{exact:!0,path:["/user"]},r.a.createElement(J,null))))};l.a.render(r.a.createElement(F,null),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.c0e41ce8.chunk.js.map